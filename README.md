# 项目来源: TJU 2025年 计算机网络课程实验

项目允许组队完成，此处分离出自己的贡献的代码，作为自己的学习的记录吧

这个库中的 == 几乎所有 == 代码和设计都是自己独立贡献的（CGI的网页搭建很多部分是参考老学长的，我不太会T_T），基本上和小组的原作业所在库没有区别。（因为代码基本上都是自己贡献的


## 项目结构

其中为方便学习(抄作业)

我分离出了各个阶段所对应的作业代码，其中包含每个阶段存在改动的代码

相比于此前的课程实验作业，服务器的作业还是能写的，我没啥水平，写的属实一般

完成基本服务器的功能不需要太多的理论知识，其实就是个人程序设计经验和代码能力的运用，对我来说是作为面对课程实验的新的开始

## 其他

关于Apache log的部分，是学习了Apache的设计，可能会不好读，但是作为作业来说完全可以不写成这样，可以重新写一个简单的，如果是写简单的log可能就只有几十行的代码量

关于Apache log的设计概要如下：

提取用户对log的配置文件 -> 解析配置文件 -> 依据解析为对应的log处理数据结构体注册处理函数 -> 根据请求和返回数据包构建log信息 -> 写入日志文件

关于CGI部分，.py和html都是参考的老学长的代码，因为对html的编写不太熟悉，并且在后续不太熟悉mysql在.py中的编写，并且为了环境好配置，我使用的是SQLite3

然后虽然有验证post方法的页面，但是我没有实现post方法，因为想到此前的每一周的实验都没有这个内容，我也懒得修改了，并且一想到要把pipline的部分修改再添加上body的识别我就心中一股恶寒，我完全不想动已经写好的代码

关于这部分可以直接拿去用，没有什么缺少迁移性的地方，是完全可以迁移的，其中的 .py cgi脚本是参考的老学长的代码逻辑， 区别在于我把mysql的部分换成了python内置的轻量级数据库sqlite3，然后文件中的 zzhi.db 就是数据库文件，好处是不用配置数据库环境了，方便使用和运行，html页面也是参考的老学长的逻辑，我此前没有写过网页，不太会，其中结合ai修改了一些实现的细节，然后让ai调整了更好看的页面格式

cgi部分我最初的时候完全不理解，整个项目的代码部分cgi有很多都是ai提供的，ai进行debug的，理论知识不太够，时间也更紧张一些

但是cgi之前的代码，几乎都是独立完成，包括设计，构思。一些更“应用类”的部分是参考的ai的写法：比如获取系统时间，查看文件权限之类

在完成基本的方法的响应之后的，每一周的实验都是，一个小时学习，一个小时完成代码的节奏做完的实验，对于我来说也是很意外的事情

week2：学院代码有bug，我花了3天深夜的时间，不少于10个小时的深夜debug，花了很多时间尝试方法，重写代码，也不知道为什么本地测试没问题，上传平台测试为60分。询问助教，助教也找不出来，后续和其他专业同学抱怨的时候，得知大家的助教都提醒了同学要修改学院给的最初的代码框架的位置，具体在parse.c中，的destroy函数的调用。我们助教完全没说，还是我得知信息后提醒助教。。。期间也没有同班级同学提出这个问题，我很是难受，我觉得可能要怪罪于我没有和别人分享这些事情的习惯，我没能及时获得信息，浪费我很长时间，一段时间内感到吃了shit一样难受，我希望后来人不要再在这方面浪费时间 T_T ，同时为了赶这个实验的ddl，我拖延了相当多想做的事情。

week2这个部分本来要是我同组的另一位同学写，但是由于不仅仅这个问题会成绩很低，然后我debug，改完一些乱飞的指针结束之后就一直卡在这个状态，我气不过就重写代码，在此之前，我正在满心欢喜的学习复现设计，Apache log的设计理念。。。。心情的跌落可是非常难受
重写代码的过程中，我的思路更加清晰一些，封装的简洁，于是后续的代码都基于了我的框架，之后组员完不成week3，可能是对我的代码框架没有办法读懂，转交给我。然后我一节课的时间完成了代码，后续的所有整体的代码工作就全部交易给我，所幸没有什么和week2一样恶心人的“挑战”了

CGI之前的部分，对于我这样的都能很好的完成，我觉得可能会有不太想独立完成的人可能可以作为一个新的开始，对于我来说是这个样子。但是CGI太难了 T_T , 助教什么都没介绍清楚，全是自己摸，摸不懂最后参考老学长github代码，可见我水平并不高，可见这个实验还是可以尝试的。

然后整个代码有个bug：

在测试cgi功能的时候，从index.html去跳转页面的时候会需要刷新多次才能让页面正确加载出来，原因是可以开启DEBUG后看到server收到的请求会莫名其妙少一个字符，比如开头的 GET 会少一个 G 变成 ET 导致出现 501 ，不知道是什么原因，发生概率非常高，但是代码在写CGI的时候已经过去了很久，痛恨以前写的太复杂且没有章法，我忘记了每个部分的东西写在哪里了T_T，所以就没有改了，我也想不到是哪里错了T_T

老学长的初代html网页跳转逻辑是其他的按钮 ： 对于url后会有一个“?”，但是我由于cgi完成时间和之前跨度很大，我懒得去补充这个处理逻辑，我换了按钮，有可能是这个原因导致的第一次切换页面会导致请求字符缺失？

并且这个现象只在跳转会出问题，出现概率较高，后续的页面刷新完全不会出现这个问题，也可能是一些初始化的问题，因为关于这方面我写的非常粗糙。

总之出现问题就刷新，就可以解决问题了

再不行就重启服务器，我感觉应该就是小地方的错

---

如果有需要交流，需要简要分析的地方，需要实验报告来理解代码，可能可以联系我，我很友好，或许会看，看了就会回复，轻喷

我水平不好T_T，不知道能不能发挥作用

Email: 425886204@qq.com  <--  qq小号，看信息随缘，因为我怕开盒 T_T 以后有机会再改到常用账号


# 抄作业的同学请给一个 `star` 感谢
