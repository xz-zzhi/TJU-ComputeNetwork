# 项目来源: TJU 2025年 计算机网络课程实验

项目允许组队完成，此处分离出自己的贡献的代码，作为自己的学习的记录吧

（CGI的网页搭建很多部分是参考老学长的，我不太会T_T），基本上和小组的原作业所在库没有区别。（因为代码基本上都是独自贡献的


## 项目结构

其中为方便查看

我分离出了各个阶段所对应的作业代码，其中包含每个阶段存在改动的代码

相比于此前的课程实验作业，服务器的作业还是能写的，我没啥水平，写的属实一般

完成基本服务器的功能不需要太多的理论知识，其实就是个人程序设计经验和代码能力的运用，对我来说是作为面对课程实验的新的开始

## 其他

关于Apache log的部分，是学习了Apache的设计，可能会不好读，但是作为作业来说完全可以不写成这样，可以重新写一个简单的，如果是写简单的log可能就只有几十行的代码量

关于Apache log的设计概要如下：

提取用户对log的配置文件 -> 解析配置文件 -> 依据解析为对应的log处理数据结构体注册处理函数 -> 根据请求和返回数据包构建log信息 -> 写入日志文件


关于CGI部分，.py和html都是参考的老学长的代码，因为对html的编写不太熟悉，并且在后续不太熟悉mysql在.py中的编写，并且为了环境好配置，我使用的是SQLite3

然后虽然有验证post方法的页面，但是我没有实现post方法，因为想到此前的每一周的实验都没有这个内容，我也懒得修改了，并且一想到要把pipline的部分修改再添加上body的识别我就心中一股恶寒，我完全不想动已经写好的代码

CGI这部分可以直接迁移使用，其中的 .py cgi脚本是参考的老学长的代码逻辑， 区别在于我把mysql的部分换成了python内置的轻量级数据库sqlite3，然后文件中的 zzhi.db 就是数据库文件，好处是不用配置数据库环境了，方便使用和运行，html页面也是参考的老学长的逻辑，我此前没有写过网页，不太会，其中结合ai修改了一些实现的细节，然后让ai调整了更好看的页面格式

cgi部分我最初的时候完全不理解，整个项目的代码部分cgi有很多都是ai提供的，ai进行debug的，理论知识不太够，时间也更紧张一些

但是cgi之前的代码，几乎都是独立完成，包括设计，构思。一些更“应用类”的部分是参考的ai的写法：比如获取系统时间，查看文件权限之类

week2：学院代码最初的代码架构有些问题，我花了很多时间尝试方法，重写代码，也不知道为什么本地测试没问题，上传平台测试为60分。询问助教，助教也找不出来，后续和其他班级同学抱怨的时候，得知大家的助教都提醒了同学要修改学院给的最初的代码框架的位置，具体在parse.c中，的destroy函数的调用。我们助教完全没说。

存在问题：

在测试cgi功能的时候，从index.html去跳转页面的时候会需要刷新多次才能让页面正确加载出来，原因是可以开启DEBUG后看到server收到的请求会莫名其妙少一个字符，比如开头的 GET 会少一个 G 变成 ET 导致出现 501 ，不知道是什么原因，发生概率非常高，但是代码在写CGI的时候已经过去了很久，痛恨以前写的太复杂且没有章法，我忘记了每个部分的东西写在哪里了，所以就没有改了，我也想不到是哪里错了

老学长的初代html网页跳转逻辑是其他的按钮 ： 对于url后会有一个“?”，但是我由于cgi完成时间和之前跨度很大，我懒得去补充这个处理逻辑，我换了按钮，有可能是这个原因导致的第一次切换页面会导致请求字符缺失？

并且这个现象只在跳转会出问题，出现概率较高，可能是一些初始化的问题，因为关于这方面我写的非常粗糙，但是后续对同一个页面刷新就不会出现这种问题


---

如果有需要交流，可能可以联系我

我水平不好，能发挥作用的话就好了

Email: 425886204@qq.com  <--  是qq小号


# 能帮到忙的话请给一个 `star` ，感谢！
